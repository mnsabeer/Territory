(function (context) { context.ApplicationSession = function () { var self = this; var commonLanguageFile = "/Scripts/Framework/Language/TerritoryLocator-"; var commonCssFile = "/Content/TerritoryLocator-"; this.CurrentUser = null; this.PreferredCulture = "en-GB"; this.Rtl = false; this.ClientCacheTag = null; this.PreviousUrl = null; this.Init = function (e) { if (e == null || e == undefined) { e = true } this.CurrentUser = currentUser; loadLanguageFile() }; var loadLanguageFile = function () { $('link[id="dynamicCssLoader"]').attr("href", getBaseURL() + commonCssFile + self.PreferredCulture + ".css"); $.ajax({ url: getBaseURL() + commonLanguageFile + self.PreferredCulture + ".js", cache: true, ifModified: true, success: function (data) { eval(data) }, error: function (e) { self.PreferredCulture = "en-GB"; loadLanguageFile(callback) } }) } } })(window)